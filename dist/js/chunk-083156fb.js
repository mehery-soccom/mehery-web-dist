(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-083156fb"],{"748d":function(e,t,a){"use strict";a("d584")},d51b:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-page-title"},[a("div",{staticClass:"page-title-wrapper"},[a("div",{staticClass:"page-title-heading"},[a("div",{staticClass:"page-title-icon"},[a("i",{class:e.icon})]),a("div",[e._v("\n                "+e._s(e.heading)+"\n                "),a("div",{staticClass:"page-title-subheading"},[e._v("\n                    "+e._s(e.subheading)+"\n                ")])])]),a("div",{staticClass:"page-title-actions"},[e._l(e.actions,(function(t){return t.hidden||!1===e.actionShow[t.name]?e._e():a("span",[t.link?a("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn",class:{"btn-link":"link"==t.type,"btn-success":!t.type||"button"==t.type},attrs:{tag:"button",to:t.link,type:"button"}},[t.icon?a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:t.icon}}):e._e(),e._v("\n                    "+e._s(t.label)+" \n                ")],1):a("button",{staticClass:"btn-shadow d-inline-flex align-items-center btn",class:{"btn-link":"link"==t.type,"btn-success":!t.type||"button"==t.type},on:{click:function(a){return e.clickAction(t)}}},[t.icon?a("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:t.icon}}):e._e(),e._v("\n                    "+e._s(t.label)+" \n                ")],1)],1)})),e.dateranegeinput&&e.dateranegeinput.hidden?a("date-range-picker",{attrs:{opens:"left","time-picker":!1,ranges:e.dateranegeinput.ranges},on:{select:e.onDateRangeSelect,update:e.onDateRangeUpdate},scopedSlots:e._u([{key:"input",fn:function(t){return[e._v("\n              "+e._s(e._f("date")(t.startDate))+" - "+e._s(e._f("date")(t.endDate))+"\n            ")]}}],null,!1,3768211459),model:{value:e.dateranegeinput.range,callback:function(t){e.$set(e.dateranegeinput,"range",t)},expression:"dateranegeinput.range"}}):e._e()],2)])])},s=[],i=(a("7f7f"),a("ecee")),r=a("c074"),o=a("ad3d"),l=a("bbf5"),c=a.n(l),m=(a("53b4"),a("2ead"),a("c1df")),u=a.n(m);function d(e){return e.hour(0).minute(0).seconds(0).milliseconds(0)}function p(e){return e.hour(23).minute(59).seconds(59).milliseconds(999)}i["c"].add(r["N"],r["H"]);var h={components:{"font-awesome-icon":o["a"],DateRangePicker:c.a},data:function(){var e=this;return{dateranegeinput:function(){if(!e.daterange)return null;var t=e.daterange.startDate||d(u()()).toDate(),a=e.daterange.endDate||p(u()()).toDate();return{range:{startDate:t,endDate:a},ranges:{Today:[d(u()()).toDate(),p(u()()).toDate()],Yesterday:[d(u()().subtract(1,"day")).toDate(),p(u()().subtract(1,"day")).toDate()],"This month":[d(u()().date(1)).toDate(),p(u()()).toDate()],"Last month":[d(u()().subtract(1,"month").date(1)).toDate(),p(u()().date(0)).toDate()],"This year":[d(u()().month(0).date(1)).toDate(),p(u()()).toDate()],"Last year":[d(u()().subtract(1,"year").month(0).date(1)).toDate(),p(u()().month(0).date(0)).toDate()]}}}()}},filters:{date:function(e){return e?e.toLocaleString():""}},created:function(e){this.daterange&&(this.daterange.startDate||(this.daterange.startDate=d(u()()).toDate()),this.daterange.endDate||(this.daterange.endDate=p(u()()).toDate()))},methods:{onDateRangeSelect:function(e){console.log("select",e)},onDateRangeUpdate:function(e){console.log("c_update",e),this.daterange&&(this.daterange.startDate=e.startDate,this.daterange.endDate=e.endDate,this.$emit("dateRangeOnUpdate",e))},clickAction:function(e){this.$emit("action",e)},action:function(e,t,a){for(var n in this.actions)if(this.actions[n].name==e){this.actions[n][t]=a;break}}},props:{icon:String,heading:String,subheading:String,actions:Array,daterange:{type:Object},actionShow:{type:Object,default:function(){return{message:"hello"}}}}},f=h,v=(a("748d"),a("2877")),g=Object(v["a"])(f,n,s,!1,null,null,null);t["a"]=g.exports},d584:function(e,t,a){},fa17:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-title",{attrs:{heading:e.heading,subheading:e.subheading,icon:e.icon,actions:e.actions},on:{action:e.onAction}}),a("b-card",{staticClass:"main-card mb-4",attrs:{title:""}},[a("b-table",{attrs:{striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(channels)",fn:function(t){return e._l(t.item.channels,(function(t){return t?a("span",{staticClass:"fab",class:e.MyDict.socialPrefix(t)},[e._v(" ")]):e._e()}))}},{key:"cell(actions)",fn:function(t){return[a("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Y"==t.item.isactive?"De-Activate":"Activate",expression:"row.item.isactive == 'Y' ? 'De-Activate' : 'Activate'"}],staticClass:"fa-stack fa-1x",attrs:{size:"sm",variant:"outline-primary"},on:{click:function(a){return e.enableItem(t.item,t.index,a.target)}}},[a("i",{staticClass:"fas fa-user fa-stack-1x"}),"Y"!=t.item.isactive?a("i",{staticClass:"fas fa-slash fa-stack-1x",staticStyle:{color:"Tomato"}}):e._e()]),e._v(" \n              "),a("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.item.admin?"Remove Admin Access":"Make Admin",expression:"!row.item.admin ? 'Make Admin' : 'Remove Admin Access'"}],staticClass:"fa-stack fa-1x",attrs:{size:"sm",variant:"outline-primary",acitve:"false"},on:{click:function(a){return e.enableItemAdmin(t.item,t.index,a.target)}}},[a("i",{staticClass:"fas fa-user-cog fa-stack-1x"}),t.item.admin?e._e():a("i",{staticClass:"fas fa-slash fa-stack-1x",staticStyle:{color:"Tomato"}})]),e._v(" \n             "),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Make Default Assignee",expression:"'Make Default Assignee'"}],staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return e.setItemDefault(t.item,t.index,a.target)}}},[t.item.defaultValue?e._e():a("span",{staticClass:"far fa-star"}),t.item.defaultValue?a("span",{staticClass:"fas fa-star"}):e._e()]),e._v(" \n              "),a("b-button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.item.message,expression:"row.item.message"}],attrs:{size:"sm",variant:"outline-primary"},on:{click:function(a){return e.editItem(t.item,t.index,a.target)}}},[a("font-awesome-icon",{attrs:{icon:"eye",title:"View"}})],1)]}}])})],1),e._m(0),e.newItem?a("b-modal",{attrs:{id:e.modelName,title:(e.newItem.id?"Edit":"Add")+" User ",size:"lg"},on:{hidden:e.cancelItem},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"position-relative form-group"},[a("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:!(e.isChanged&&e.isValid)},on:{click:e.createItem}},[e._v("Create")])])]},proxy:!0}],null,!1,1701182966)},[a("ValidationObserver",{ref:"form"},[a("div",{staticClass:"row"},[a("div",{staticClass:"position-relative form-group col-md-6"},[a("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",{attrs:{for:"examplePassword"}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.name,expression:"newItem.name"}],staticClass:"form-control",attrs:{name:"agent_name",id:"examplePassword",placeholder:"John Doe",type:"text"},domProps:{value:e.newItem.name},on:{input:function(t){t.target.composing||e.$set(e.newItem,"name",t.target.value)}}}),a("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!1,1618159028)})],1),a("div",{staticClass:"position-relative form-group col-md-6"},[a("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("label",{attrs:{for:"exampleEmail"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.agent_email,expression:"newItem.agent_email"}],staticClass:"form-control",attrs:{name:"email",id:"exampleEmail",placeholder:"abc@xyz.com",type:"email"},domProps:{value:e.newItem.agent_email},on:{input:function(t){t.target.composing||e.$set(e.newItem,"agent_email",t.target.value)}}}),a("span",{staticClass:"v-input-error"},[e._v(e._s(t.errors[0]))])]}}],null,!1,1218837978)})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"position-relative form-group col-md-6"},[a("label",{attrs:{for:"exampleEmail"}},[e._v("Username")]),a("div",{staticClass:"input-group"},[a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[e._v("@")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.code,expression:"newItem.code"}],staticClass:"form-control",attrs:{placeholder:"john,sam2",type:"text",readonly:e.newItem.id},domProps:{value:e.newItem.code},on:{input:function(t){t.target.composing||e.$set(e.newItem,"code",t.target.value)}}})])]),a("div",{staticClass:"position-relative form-group col-md-6"},[a("label",{attrs:{for:"examplePassword"}},[e._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.agent_password,expression:"newItem.agent_password"}],staticClass:"form-control",attrs:{name:"password",id:"examplePassword",placeholder:"password",type:"password"},domProps:{value:e.newItem.agent_password},on:{input:function(t){t.target.composing||e.$set(e.newItem,"agent_password",t.target.value)}}})])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"position-relative form-group"},[a("label",{attrs:{for:"exampleSelect"}},[e._v("Team")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newItem.dept_id,expression:"newItem.dept_id"}],staticClass:"form-control",attrs:{name:"select",id:"exampleSelect"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newItem,"dept_id",t.target.multiple?a:a[0])}}},e._l(e.teams,(function(t){return"Y"==t.isactive?a("option",{domProps:{value:t.id}},[e._v("\n                                    "+e._s(t.name))]):e._e()})),0)]),a("div",{staticClass:"form-check form-switch"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newItem.admin,expression:"newItem.admin"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"flexSwitchCheckDefault"},domProps:{checked:Array.isArray(e.newItem.admin)?e._i(e.newItem.admin,null)>-1:e.newItem.admin},on:{change:function(t){var a=e.newItem.admin,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i=null,r=e._i(a,i);n.checked?r<0&&e.$set(e.newItem,"admin",a.concat([i])):r>-1&&e.$set(e.newItem,"admin",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.newItem,"admin",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[e._v("Admin Access")])])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"position-relative form-group"},[a("label",{attrs:{for:"exampleCustomMutlipleSelect"}},[e._v("Channels")]),a("label",{staticClass:"float-right",attrs:{for:"select-all-channel"}},[e._v("Select All\n                                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.isSelectAllChannel,expression:"isSelectAllChannel"}],attrs:{type:"checkbox",name:"select-all-channel"},domProps:{checked:Array.isArray(e.isSelectAllChannel)?e._i(e.isSelectAllChannel,null)>-1:e.isSelectAllChannel},on:{change:[function(t){var a=e.isSelectAllChannel,n=t.target,s=!!n.checked;if(Array.isArray(a)){var i=null,r=e._i(a,i);n.checked?r<0&&(e.isSelectAllChannel=a.concat([i])):r>-1&&(e.isSelectAllChannel=a.slice(0,r).concat(a.slice(r+1)))}else e.isSelectAllChannel=s},e.selectAllChannel]}})]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newItem.channels,expression:"newItem.channels"}],staticClass:"custom-select",attrs:{multiple:"",type:"select",id:"exampleCustomMutlipleSelect",name:"customSelect"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newItem,"channels",t.target.multiple?a:a[0])},e.selectChannel]}},e._l(e.channels,(function(t){return a("option",[e._v(e._s(t))])})),0)])])])])],1):e._e()],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"main-card mb-3 card"})])])}],i=(a("96cf"),a("3b8d")),r=(a("7f7f"),a("d51b")),o=a("d166"),l=a("ecee"),c=a("c074"),m=a("ad3d");function u(){return{name:null,agent_email:"",dept_id:null,channels:[],agent_channels:"",admin:!1}}l["c"].add(c["V"],c["R"],c["U"],c["T"],c["C"],c["K"]);var d={components:{PageTitle:r["a"],"font-awesome-icon":m["a"],MyDict:o["b"]},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],heading:"Users",subheading:"Add edit users",icon:"pe-7s-users icon-gradient bg-happy-itmeo fa fa-user-friends",actions:[{label:"Add User",icon:"plus",name:"ADD_ITEM"}],fields:[{key:"dept.name",label:"Team"},{key:"name",label:"Name"},{key:"code",label:"Username"},{key:"agent_email",label:"Email"},{key:"channels",label:"Channels",class:"upper-case"},{key:"actions",label:"Action"}],channels:["WHATSAPP","FACEBOOK","TWITTER","TELEGRAM","WEBSITE"],newItem:u(),modelName:"MODAL_ADD_USERS",isSelectAllChannel:!1}},computed:{items:function(e){return this.$store.getters.StateAgents},teams:function(e){return this.$store.getters.StateTeams},isChanged:function(e){return this.oldHash!==JSON.stringify(this.newItem)},isValid:function(e){return this.newItem.name&&this.newItem.code&&this.newItem.agent_email}},created:function(e){this.loadAgents(),this.loadAgentTeams()},methods:{loadAgents:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("GetAgents");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadAgentTeams:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("GetTeams");case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate();case 2:if(t=e.sent,!0!==t){e.next=9;break}return e.next=6,this.$store.dispatch("CreateAgent",this.newItem);case 6:this.newItem=u(),this.$refs.form.reset(),this.onAction({name:"CANCEL"});case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),enableItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("DeActivateAgent",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),enableItemAdmin:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("DeAdminAgent",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setItemDefault:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("SetAgentDefault",t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),cancelItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.newItem=u(),this.onAction({name:"CANCEL"});case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),editItem:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(a in this.newItem=u(),t)this.newItem[a]=t[a];this.isSelectAllChannel=this.newItem.channels.length==this.channels.length,this.onAction({name:"EDIT_ITEM"});case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onAction:function(e){switch(e.name){case"ADD_ITEM":this.oldHash=JSON.stringify(this.newItem),this.selectChannel(),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",e);break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",e);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",e)}},selectAllChannel:function(e){this.newItem.channels=this.isSelectAllChannel?this.channels.map((function(e){return e})):[]},selectChannel:function(){this.isSelectAllChannel=this.newItem.channels.length==this.channels.length}}},p=d,h=a("2877"),f=Object(h["a"])(p,n,s,!1,null,null,null);t["default"]=f.exports}}]);