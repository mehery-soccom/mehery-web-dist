(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-313dfc85"],{"09ed":function(t,e,n){"use strict";n("ae76")},"2d8a":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";function t(t){return"function"==typeof t}function e(){}var n=function(t){this.previousValue=t,this.interrupted=!1,this.interruptHandlers=new Set};function i(t){return function(){return t}}function s(){return[]}n.prototype.throwIfInterrupted=function(){if(this.interrupted)throw new Error},n.prototype.interrupt=function(){this.interrupted||(this.interrupted=!0,this.interruptHandlers.forEach((function(t){try{t()}catch(t){}})))},n.prototype.onInterrupt=function(t){if(this.interrupted&&!this.interruptHandlers.has(t))try{t()}catch(t){}this.interruptHandlers.add(t)};var a={animationDuration:{type:Number,default:1e3},animationEasing:{type:String,default:"ease"},animationOverlap:{type:Number,default:1},color:{type:[String,Function],default:"Black"},createCanvas:{type:Function,default:function(){return document.createElement("canvas")}},createWorker:{type:Function,default:function(t){return new Worker(URL.createObjectURL(new Blob([t])))}},enterAnimation:{type:[Object,String],default:i({opacity:0})},fontFamily:{type:[String,Function],default:"serif"},fontSizeRatio:{type:Number,default:0},fontStyle:{type:[String,Function],default:"normal"},fontVariant:{type:[String,Function],default:"normal"},fontWeight:{type:[String,Function],default:"normal"},leaveAnimation:{type:[Object,String],default:i({opacity:0})},loadFont:{type:Function,default:function(t,e,n,i){return document.fonts.load([e,n,"1px",t].join(" "),i)}},rotation:{type:[Number,Function],default:0},rotationUnit:{type:[String,Function],default:"turn"},spacing:{type:Number,default:0},text:{type:[String,Function],default:""},weight:{type:[Number,Function],default:1},words:{type:Array,default:s}},r=i(null);function o(t){if(t){var e=typeof t;return"object"===e||"function"===e}return!1}function c(t){return"string"==typeof t}var u={animationOptions:function(){var t,e,n,i=this.animationDuration,s=this.enterAnimation,a=this.leaveAnimation;if(o(s)&&o(a)){var u=(t=Object.assign({},s,a),e=r,n={},Object.entries(t).forEach((function(i){var s=i[0],a=i[1];n[s]=e(a,s,t)})),n),l=function(t){Object.assign(t.style,s)},f=function(t,e){setTimeout((function(){Object.assign(t.style,u),setTimeout(e,i)}),1)};return{props:{css:!1},on:{beforeAppear:l,appear:f,beforeEnter:l,enter:f,leave:function(t,e){Object.assign(t.style,a),setTimeout(e,i)}}}}return c(s)&&c(a)?{props:{duration:i,appear:!0,appearActiveClass:s,enterActiveClass:s,leaveActiveClass:a}}:{}},normalizedAnimationOverlap:function(){var t=this.animationOverlap;return(t=Math.abs(t))<1&&(t=1/t),t},separateAnimationDelay:function(){var t=this.cloudWords;return t.length>1?(this.animationDuration-this.separateAnimationDuration)/(t.length-1):0},separateAnimationDuration:function(){var t=this.cloudWords;if(t.length>0){var e=this.animationDuration,n=this.normalizedAnimationOverlap;return e/Math.min(n,t.length)}return 0}},l=Array.isArray;function f(e){return t(e)?e:i(e)}var h=2*Math.PI,d=h/360;function p(t){return void 0===t}function m(t,e){return t.postMessage(e),function(t){return new Promise((function(e,n){var i,s=function(t){var n=t.data;i(),e(n)},a=function(t){var e=t.error;i(),n(e)};i=function(){t.removeEventListener("message",s),t.removeEventListener("error",a)},t.addEventListener("message",s),t.addEventListener("error",a)}))}(t)}function g(t,e,n){return Math.ceil(t*Math.abs(Math.sin(n))+e*Math.abs(Math.cos(n)))}function v(t,e,n){return Math.ceil(t*Math.abs(Math.cos(n))+e*Math.abs(Math.sin(n)))}function y(t,e,n,i,s){return[t,e,n,i+"px",s].join(" ")}function b(t,e){return Math.ceil(t/e)*e}function _(t,e,n){var i=n().getContext("2d");return i.font=e,i.measureText(t).width}var w=function(t,e,n,i,s,a,r){this.t=t,this.i=e,this.o=n,this.u=i,this.s=s,this.h=a,this.l=r,this.v=1,this.m=0,this.p=0,this.g=0},C={M:{configurable:!0},S:{configurable:!0},j:{configurable:!0},F:{configurable:!0},O:{configurable:!0},W:{configurable:!0},A:{configurable:!0},B:{configurable:!0},C:{configurable:!0},L:{configurable:!0},_:{configurable:!0},P:{configurable:!0},T:{configurable:!0},k:{configurable:!0},N:{configurable:!0},D:{configurable:!0},H:{configurable:!0},R:{configurable:!0},U:{configurable:!0}};C.M.get=function(){return this.v},C.M.set=function(t){this.v!==t&&(this.v=t,this.V=void 0)},C.S.get=function(){return y(this.h,this.s,this.u,this.M,this.o)},C.j.get=function(){return void 0===this.q&&(this.q=_(this.t,y(this.h,this.s,this.u,1,this.o),this.l)),this.q},C.F.get=function(){return this.j*this.M},C.O.get=function(){return this.p*this.M},C.O.set=function(t){this.p=t/this.M},C.W.get=function(){return this.g*this.M},C.W.set=function(t){this.g=t/this.M},C.A.get=function(){return v(this.F,this.M,this.i)},C.B.get=function(){return g(this.F,this.M,this.i)},C.C.get=function(){return this.O-this.A/2},C.L.get=function(){return this.W-this.B/2},C._.get=function(){return this.m},C._.set=function(t){this.m!==t&&(this.m=t,this.V=void 0)},C.P.get=function(){return void 0===this.V&&(this.V=function(t,e,n,i,s,a,r,o,c){var u=y(e,n,i,s*=4,a),l=r*s*2,f=l+_(t,u,c),h=l+s,d=c(),p=d.getContext("2d"),m=b(v(f,h,o),4),w=b(g(f,h,o),4);d.width=m,d.height=w,p.translate(m/2,w/2),p.rotate(o),p.font=u,p.textAlign="center",p.textBaseline="middle",p.fillText(t,0,0),l>0&&(p.miterLimit=1,p.lineWidth=l,p.strokeText(t,0,0));for(var C=p.getImageData(0,0,m,w).data,M=[],x=1/0,S=0,O=1/0,k=0,j=m/4,I=w/4,E=0;E<j;++E)for(var F=0;F<I;++F)t:for(var D=0;D<4;++D)for(var P=0;P<4;++P)if(C[4*(m*(4*F+P)+(4*E+D))+3]){M.push([E,F]),x=Math.min(E,x),S=Math.max(E+1,S),O=Math.min(F,O),k=Math.max(F+1,k);break t}return M.length>0?[M.map((function(t){var e=t[0],n=t[1];return[e-x,n-O]})),S-x,k-O,Math.ceil(j/2)-x,Math.ceil(I/2)-O]:[M,0,0,0,0]}(this.t,this.h,this.s,this.u,this.M,this.o,this._,this.i,this.l)),this.V},C.T.get=function(){return this.P[0]},C.k.get=function(){return this.P[1]},C.N.get=function(){return this.P[2]},C.D.get=function(){return this.P[3]},C.H.get=function(){return this.P[4]},C.R.get=function(){return Math.ceil(this.O)-this.D},C.R.set=function(t){this.O=t+this.D},C.U.get=function(){return Math.ceil(this.W)-this.H},C.U.set=function(t){this.W=t+this.H},Object.defineProperties(w.prototype,C);var M={cloudWords:function(t){this.$emit("update:cloudWords",t)},progress:{handler:function(t){this.$emit("update:progress",t)},deep:!0,immediate:!0}},x={updateElementSize:function(){var t=this.$el;t&&(this.elementWidth=t.offsetWidth,this.elementHeight=t.offsetHeight)}},S={name:"VueWordCloud",mixins:[function(i){return{data:function(){var t={};return Object.keys(i).forEach((function(e){t["asyncComputed_trigger_"+e]={}})),t},computed:{},beforeCreate:function(){var s=this,a=new Set;Object.entries(i).forEach((function(i){var r=i[0],o=i[1],c=o.get,u=o.default,l=o.errorHandler;void 0===l&&(l=e);var f,h=!0;s.$options.computed[r]=function(){return this["asyncComputed_trigger_"+r],this["asyncComputed_promise_"+r],u},s.$options.computed["asyncComputed_promise_"+r]=function(){var e=this;f&&(f.interrupt(),a.delete(f)),h&&(h=!1,t(u)&&(u=u.call(this)));var i=new n(u);f=i,a.add(f),new Promise((function(t){t(c.call(e,i))})).then((function(t){i.throwIfInterrupted(),u=t,e["asyncComputed_trigger_"+r]={}})).catch(l)}}))}}}({cloudWords:{get:function(t){var n,i=this,s=this,a=s.elementWidth,r=s.elementHeight,u=s.words,g=s.text,v=s.weight,y=s.rotation,b=s.rotationUnit,_=s.fontFamily,C=s.fontWeight,M=s.fontVariant,x=s.fontStyle,S=s.color,O=s.spacing,k=s.fontSizeRatio,j=s.createCanvas,I=s.loadFont,E=s.createWorker;n=k,k=(n=Math.abs(n))>1?1/n:n;var F=function(t){var e=t[0],n=t[1];return e>n?[1,n/e]:n>e?[e/n,1]:[1,1]}([a,r]);if(a>0&&r>0){var D=f(g),P=f(v),R=f(y),T=f(b),W=f(_),A=f(C),L=f(M),U=f(x),B=f(S);return u=u.map((function(t,e){var n,i,s,a,r,f,m,g,v,y,b;t&&(c(t)?s=t:l(t)?(s=(n=t)[0],a=n[1]):o(t)&&(s=(i=t).text,a=i.weight,r=i.rotation,f=i.rotationUnit,m=i.fontFamily,g=i.fontWeight,v=i.fontVariant,y=i.fontStyle,b=i.color)),p(s)&&(s=D(t,e,u)),p(a)&&(a=P(t,e,u)),p(r)&&(r=R(t,e,u)),p(f)&&(f=T(t,e,u)),p(m)&&(m=W(t,e,u)),p(g)&&(g=A(t,e,u)),p(v)&&(v=L(t,e,u)),p(y)&&(y=U(t,e,u)),p(b)&&(b=B(t,e,u));var _=new w(s,function(){switch(f){case"turn":return r*h;case"deg":return function(t){return t*d}(r)}return r}(),m,g,v,y,j);return Object.assign(_,{J:t,Y:a,G:b}),_})),Promise.resolve().then((function(){return Promise.all(u.map((function(t){var e=t.o,n=t.h,i=t.u,s=t.t;return I(e,n,i,s)})))})).catch(e).then((function(){if((u=u.filter((function(t){return t.F>0})).sort((function(t,e){return e.Y-t.Y}))).length>0){var e=u[0],n=function(t){return t[(e=t,e.length-1)];var e}(u),s=e.Y,o=n.Y;if(o<s){var c=k>0?1/k:o>0?s/o:s<0?o/s:1+s-o;u.forEach((function(t){var e,n,i;t.M=(e=t.Y,(i=1)+(e-(n=o))*(c-i)/(s-n))}))}u.reduceRight((function(t,e){return e.M<2*t?e.M/=t:(t=e.M,e.M=1),e.I=t}),1),u.forEach((function(t){t.M*=4}));var l=E('!function(){"use strict";var r=function(t){self.removeEventListener("message",r);var n,e,a,f,i,u=t.data,o=function(){n={},e=0,a=0,f=0,i=0};o();var s=function(){return Math.ceil((e+a)/2)},v=function(){return Math.ceil((f+i)/2)},c=function(){return{left:s(),top:v(),width:a-e,height:i-f}},l=function(r,t,u){r.forEach((function(r){var o=r[0],s=r[1],v=t+o,c=u+s;n[v+"|"+c]=!0,e=Math.min(v,e),a=Math.max(v+1,a),f=Math.min(c,f),i=Math.max(c+1,i)}))},h=function(r,t,e){return function(r,t,n){var e,a,f=r[0],i=r[1],u=t[0],o=t[1];f>i?(e=1,a=i/f):i>f?(a=1,e=f/i):e=a=1;var s=[u,o];if(n(s))return s;for(var v=u,c=o,l=u,h=o,M=v,d=c;;){u-=e,o-=a,v+=e,c+=a;var m=Math.floor(u),g=Math.floor(o),p=Math.ceil(v),E=Math.ceil(c);if(p>M)for(var L=g;L<E;++L){var x=[p,L];if(n(x))return x}if(E>d)for(var y=p;y>m;--y){var w=[y,E];if(n(w))return w}if(m<l)for(var B=E;B>g;--B){var F=[m,B];if(n(F))return F}if(g<h)for(var b=m;b<p;++b){var j=[b,g];if(n(j))return j}l=m,h=g,M=p,d=E}}(u,[t+s(),e+v()],(function(t){var e=t[0],a=t[1];return function(r,t,e){return r.every((function(r){var a=r[0],f=r[1];return!n[t+a+"|"+(e+f)]}))}(r,e,a)}))};self.postMessage({}),self.addEventListener("message",(function(r){self.postMessage({getBounds:c,put:l,findFit:h,clear:o}[r.data.name].apply(null,r.data.args))}))};self.addEventListener("message",r)}();\n'),f={completedWords:0,totalWords:u.length};return Promise.resolve().then((function(){return t.throwIfInterrupted(),i.progress=f,m(l,F)})).then((function(){t.throwIfInterrupted(),f.completedWords++;var e=Promise.resolve();return u.reduce((function(n,i,s){return e=e.then((function(){return i.I<n.I?Promise.resolve().then((function(){return m(l,{name:"clear"})})).then((function(){var t=Promise.resolve(),e=n.I/i.I;return u.slice(0,s).forEach((function(n){t=t.then((function(){return n.M*=e,m(l,{name:"put",args:[n.T,n.R,n.U]})}))})),t})):m(l,{name:"put",args:[n.T,n.R,n.U]})})).then((function(){return i._=O,m(l,{name:"findFit",args:[i.T,i.R,i.U]})})).then((function(e){var n=e[0],s=e[1];t.throwIfInterrupted(),f.completedWords++,i.R=n,i.U=s,i._=0})),i})),e})).then((function(){return m(l,{name:"put",args:[n.T,n.R,n.U]})})).then((function(){return m(l,{name:"getBounds"})})).then((function(t){var e=t.left,n=t.top,i=t.width,s=t.height;if(i>0&&s>0){var o=Math.min(a/i,r/s);u.forEach((function(t){t.O-=e,t.W-=n,t.M*=o}))}var c=new Set;return u.map((function(t){for(var e=t.J,n=t.t,i=t.Y,s=t.i,a=t.o,r=t.u,o=t.s,u=t.h,l=t.S,f=t.O,h=t.W,d=t.G,p=JSON.stringify([n,a,r,o,u]);c.has(p);)p+="!";return c.add(p),{key:p,word:e,text:n,weight:i,rotation:s,font:l,color:d,left:f,top:h}}))})).finally((function(){l.terminate()})).finally((function(){t.throwIfInterrupted(),i.progress=null}))}return[]}))}return[]},default:s}})],props:a,data:function(){return{elementWidth:0,elementHeight:0,progress:null}},computed:u,watch:M,mounted:function(){var t,e,n=this;t=function(){if(n._isDestroyed)return!1;n.updateElementSize()},e=1e3,function(t){var e=function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];return t.call.apply(t,[this,e].concat(n))};return e}((function(n){requestAnimationFrame((function(){!1!==t()&&setTimeout(n,e)}))}))()},methods:x,render:function(t){var e=this.$scopedSlots,n=this.animationEasing,i=this.animationOptions,s=this.cloudWords,a=this.separateAnimationDelay,r=this.separateAnimationDuration;return e=Object.assign({},{default:function(t){return t.text}},e),t("div",{style:{height:"100%",position:"relative",width:"100%"}},[t("div",{style:{bottom:"50%",position:"absolute",right:"50%",transform:"translate(50%,50%)"}},s.map((function(s,o){var c=s.color,u=s.font,l=s.left,f=s.rotation,h=s.text,d=s.top,p=s.weight,m=s.word;return t("transition",Object.assign({},i),[t("div",{key:o,style:Object.assign({},{left:l+"px",position:"absolute",top:d+"px"},r>0?{animation:[r+"ms",n,a*o+"ms"].join(" "),transition:["all",r+"ms",n,a*o+"ms"].join(" ")}:{})},[t("div",{style:Object.assign({},{bottom:0,position:"absolute",right:0,transform:["translate(50%,50%)","rotate("+f+"rad)"].join(" ")},r>0?{transition:["all",r+"ms",n,a*o+"ms"].join(" ")}:{})},[t("span",{style:{color:c,display:"inline-block",font:u,lineHeight:1,transform:"translateY(-0.1em)",whiteSpace:"nowrap"}},[e.default({color:c,font:u,left:l,text:h,top:d,weight:p,word:m})])])])])})))])}},O=globalThis.window;if(O){var k=O.Vue;k&&k.component(S.name,S)}return S}))},"8ecf":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{heading:t.heading,subheading:t.subheading,icon:t.icon,daterange:t.input.daterange},on:{dateRangeOnUpdate:t.dateRangeOnUpdate}}),n("div",{staticStyle:{width:"100%",clear:"both"}},[n("vue-multi-select",{attrs:{btnLabel:t.input.tagtypes.btnLabel,options:t.input.tagtypes.options,selectOptions:t.input.tagtypes.values},on:{close:t.filter},model:{value:t.input.tagtypes.selected,callback:function(e){t.$set(t.input.tagtypes,"selected",e)},expression:"input.tagtypes.selected"}})],1),n("hr"),n("div",{staticStyle:{width:"100%",clear:"both"}},[n("vue-word-cloud",{staticStyle:{height:"300px",width:"80%",margin:"auto"},attrs:{words:t.tags,"font-size-ratio":5,spacing:.25,color:function(t){var e=t[1];return e>10?"DeepPink":e>5?"RoyalBlue":"Indigo"},"font-family":"Roboto"}})],1),n("b-table",{attrs:{id:"agent-session-list",striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,"per-page":t.sessions.perPage,"current-page":t.sessions.currentPage,items:t.sessions.items,fields:t.sessions.fields},scopedSlots:t._u([{key:"cell(assignedToAgent)",fn:function(e){return["BOT"==e.item.mode?n("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"robot"}}):t._e(),"AGENT"==e.item.mode?n("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"user"}}):t._e(),t._v("\n                 "+t._s(e.item.assignedToAgent)+"\n            ")]}},{key:"cell(contactId)",fn:function(e){return[n("i",{staticClass:"fab",class:t.MyDict.socialPrefix(e.item.contactId)}),t._v("\n                "+t._s(e.item.contactName||e.item.contactId)+"\n            ")]}},{key:"cell(startSessionStamp)",fn:function(e){return[t._v("\n                "+t._s(t._f("formatDate")(e.item.startSessionStamp))+"\n            ")]}},{key:"cell(fistResponseStamp)",fn:function(e){return[t._v("\n                "+t._s(t._f("formatDate")(e.item.fistResponseStamp))+" \n            ")]}},{key:"cell(closeSessionStamp)",fn:function(e){return[t._v("\n                "+t._s(t._f("formatDate")(e.item.closeSessionStamp))+"\n                "),e.item.active?n("font-awesome-icon",{style:{color:"green"},attrs:{icon:"circle"}}):t._e()]}},{key:"cell(actions)",fn:function(e){return[n("span",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showChat(e.item,e.index,n.target)}}})]}}])}),n("b-pagination",{attrs:{"total-rows":t.sessions.rows,"per-page":t.sessions.perPage,"aria-controls":"agent-session-list"},model:{value:t.sessions.currentPage,callback:function(e){t.$set(t.sessions,"currentPage",e)},expression:"sessions.currentPage"}}),n("div",{staticClass:"chat_archive",class:{closed:!t.session}},[t.session?n("agent-chat",{key:t.session.sessionId,attrs:{session:t.session},on:{close:t.hideChat}}):t._e()],1)],1)},s=[],a=(n("ac6a"),n("456d"),n("96cf"),n("3b8d")),r=n("a391"),o=n("d166"),c=n("df4b"),u=n("2d8a"),l=n.n(u),f=n("dcc6"),h=n.n(f),d=(n("526a"),n("ecee")),p=n("c074"),m=n("ad3d");d["c"].add(p["Q"],p["u"],p["a"],p["d"],p["O"],p["t"],p["w"],p["J"],p["R"]);var g={components:{PageTitle:r["a"],"font-awesome-icon":m["a"],AgentChat:c["a"],VueWordCloud:l.a,vueMultiSelect:h.a},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],heading:"Taxonomy",subheading:"Select date range for report",icon:"pe-7s-chat icon-gradient bg-tempting-azure",input:{daterange:{startDate:null,endDate:null},tagtypes:{btnLabel:function(t){return t.length>0?t.join(","):"Select Type"},options:{multi:!0,labelName:"Filter Types"},values:[],selected:[]}},sessions:{fields:[{key:"type",label:"Type",sortable:!0},{key:"tag",label:"Tag",sortable:!0},{key:"count",label:"Count",sortable:!0}],items:[],perPage:25,currentPage:1,rows:0},session:null,allItems:[],tagTypesSelected:[]}},computed:{tags:function(){return this.sessions&&this.sessions.items?this.sessions.items.map((function(t){return[t.tag,t.count]})):[]}},mounted:function(t){this.dateRangeOnUpdate()},methods:{getSessions:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("GetTaxonomy",{agent:"TEAM",contactType:"MESSAGE_TWITTER",dateRange1:this.input.daterange.startDate,dateReange2:this.input.daterange.endDate});case 2:e=t.sent,this.allItems=e.results,this.input.tagtypes.values=Object.keys(e.results.reduce((function(t,e){return t[e.type]=(t[e.type]||0)+e.count,t}),{})),this.filter();case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),filter:function(t){var e=this;this.sessions.items=this.allItems.filter((function(t){return!e.input.tagtypes.selected||!e.input.tagtypes.selected.length||e.input.tagtypes.selected.indexOf(t.type)>-1})),this.sessions.rows=this.sessions.items.length},dateRangeOnUpdate:function(t){console.log("dateRangeOnUpdate",t),this.input.daterange.startDate=this.input.daterange.startDate.getTime(),this.input.daterange.endDate=this.input.daterange.endDate.getTime(),this.getSessions()},hideChat:function(t){this.session=null},showChat:function(t){this.session&&this.session.sessionId==t.sessionId?this.session=null:this.session=t}}},v=g,y=(n("97ee"),n("2877")),b=Object(y["a"])(v,i,s,!1,null,"7ee9ef7e",null);e["default"]=b.exports},"97ee":function(t,e,n){"use strict";n("cb59")},ae76:function(t,e,n){},cb59:function(t,e,n){},df4b:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-shadow chat_box_wrapper"},[n("div",{staticClass:"card-header msg_head chat-head"},[n("div",{staticClass:"d-flex bd-highlight chat-header-left"},[t.activeChat?n("div",{staticClass:"img_cont",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}}),n("span",{staticClass:"online_icon",attrs:{hidden:""}})]):t._e(),t.activeChat?n("div",{staticClass:"user_info",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("span",{staticClass:"user_name"},[t._v(t._s(t.activeChat.name))]),t.activeChat.ilastmsg?n("p",{staticClass:"user_text"},[t._v(t._s(t._f("formatDate")(t.activeChat.ilastmsg.timestamp))+" ")]):t._e()]):t._e(),n("div",{staticClass:"video_cam"},[t._m(0),t._m(1),n("span",{attrs:{hidden:""},on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("i",{staticClass:"fas fa-history"})])])]),n("div",{staticClass:"chat-header-right"},[n("div",{staticClass:"video_cam"},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Close",expression:"'Close'"}],staticStyle:{cursor:"pointer"},on:{click:t.closeBox}},[n("i",{staticClass:"fa fa-close"})])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMediaOptions,expression:"!showMediaOptions"}],staticClass:"card-body msg_card_body"},[n("div",{staticClass:"msg_card_body-bubbles"},[n("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots",opacity:.3,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t.activeChat?t.activeChat?t._l(t.activeChat.messages,(function(e){return n("div",["I"==e.type?n("div",{staticClass:"d-flex justify-content-start mb-4 chat-bubble",attrs:{title:e.tags?e.tags.categories:null}},[n("div",{staticClass:"msg_cotainer"},[n("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))])]),n("span",{staticClass:"msg_time"},[n("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))]),t._v("  "+t._s(t._f("formatDate")(e.timestamp)))])]):"O"==e.type?n("div",{staticClass:"d-flex justify-content-end mb-4 chat-bubble",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[e.messageId?t._e():n("i",{staticClass:"sending fa fa-spinner fa-spin"},[t._v(" ")]),n("div",{staticClass:"msg_cotainer_send"},[n("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?n("div",[n("span",{staticClass:"fa fa-paperclip"}),t._v(" "+t._s(e.template)+" \n                "),n("div",{staticClass:"input-group my-attachments",staticStyle:{"max-width":"200px"}},t._l(e.attachments,(function(e){return n("img",{staticStyle:{"max-width":"200px"},attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):e.template?n("div",{staticClass:"my-msg-template-tag"},[n("span",{staticClass:"fa fa-tag"}),t._v(" "+t._s(e.template)+"\n            ")]):t._e(),e.logs?n("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.logs+"",expression:"m.logs+''"}],staticClass:"log_icon fa fa-exclamation-triangle float-right"}):t._e(),n("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("formatDate")(e.timestamp))+"  "),n("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))])])])]):"A"==e.type||"L"==e.type?n("div",{staticClass:"d-flex justify-content-center chat-bubble chat-bubble-note",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[e.messageId?t._e():n("i",{staticClass:"sending fa fa-spinner fa-spin"},[t._v(" ")]),n("div",{staticClass:"msg_cotainer_action"},[t._v("\n            "+t._s(t._f("formatDate")(e.timestamp))+"  "),n("span",{staticClass:"msg_user"},[t._v(t._s(e.name||"---"))]),t._v(" "),n("span",{staticClass:"fa fa-long-arrow-alt-right"}),t._v(" "+t._s(t._f("newlines")(t._f("striphtml")(e.action)))+"\n\n            "),t._l(e.logs,(function(i){return e.logs?n("i",{staticClass:"prepend-comma"},[t._v("\n                 "+t._s(t._f("newlines")(t._f("striphtml")(t._f("log_option")(i,e.action)))))]):t._e()}))],2)]):t._e()])})):t._e():n("div",{staticClass:"msg_card_body-logo"},[n("span",{})])],2)]),n("div",{staticClass:"card-footer"})])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{hidden:""}},[n("i",{staticClass:"fas fa-video"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{hidden:""}},[n("i",{staticClass:"fas fa-phone"})])}],a=(n("96cf"),n("3b8d")),r=(n("ecee"),n("ad3d")),o=n("d166"),c=n("9062"),u=n.n(c),l=(n("9dbb"),n("3e84")),f={components:{"font-awesome-icon":r["a"],Loading:u.a,SlideUpDown:l["a"]},props:{session:Object},computed:{},data:function(){return{message_text:"",quickReplies:null,selectedMedia:null,showMediaOptions:!1,showChatOptions:!1,lastMessageId:null,ilastMessageId:null,MyDict:o["b"],MyFlags:o["c"],MyConst:o["a"],isLoading:!1,showQuickActions:!1,activeChat:{messages:null}}},created:function(){console.log("created")},updated:function(){console.log("updated")},mounted:function(){this.loadMessages(),this.loadQuickLabels()},beforeUnmount:function(){},methods:{loadMessages:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("GetSessionChats..."),this.isLoading=!0,t.next=4,this.$store.dispatch("GetSessionChats",this.session);case 4:e=t.sent,console.log("resp",e),this.activeChat=e,this.isLoading=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeBox:function(t){this.$emit("close")},loadQuickLabels:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadQuickLabels");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},h=f,d=(n("09ed"),n("2877")),p=Object(d["a"])(h,i,s,!1,null,"36f67f76",null);e["a"]=p.exports}}]);