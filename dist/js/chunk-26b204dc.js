(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26b204dc"],{"28a5":function(t,e,n){"use strict";var s=n("aae3"),a=n("cb7c"),i=n("ebd6"),o=n("0390"),c=n("9def"),r=n("5f1b"),l=n("520a"),u=n("79e5"),d=Math.min,m=[].push,p="split",h="length",f="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));n("214f")("split",2,(function(t,e,n,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!s(t))return n.call(a,t,e);var i,o,c,r=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?v:e>>>0,g=new RegExp(t.source,u+"g");while(i=l.call(g,a)){if(o=g[f],o>d&&(r.push(a.slice(d,i.index)),i[h]>1&&i.index<a[h]&&m.apply(r,i.slice(1)),c=i[0][h],d=o,r[h]>=p))break;g[f]===i.index&&g[f]++}return d===a[h]?!c&&g.test("")||r.push(""):r.push(a.slice(d)),r[h]>p?r.slice(0,p):r}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,s){var a=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,a,s):b.call(String(a),n,s)},function(t,e){var s=u(b,t,this,e,b!==n);if(s.done)return s.value;var l=a(t),m=String(this),p=i(l,RegExp),h=l.unicode,f=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),_=new p(g?l:"^(?:"+l.source+")",f),C=void 0===e?v:e>>>0;if(0===C)return[];if(0===m.length)return null===r(_,m)?[m]:[];var w=0,y=0,x=[];while(y<m.length){_.lastIndex=g?y:0;var k,S=r(_,g?m:m.slice(y));if(null===S||(k=d(c(_.lastIndex+(g?0:y)),m.length))===w)y=o(m,y,h);else{if(x.push(m.slice(w,y)),x.length===C)return x;for(var M=1;M<=S.length-1;M++)if(x.push(S[M]),x.length===C)return x;y=w=k}}return x.push(m.slice(w)),x}]}))},"4bc8":function(t,e,n){},"6e40":function(t,e,n){},"75a9":function(t,e,n){"use strict";n("7b00")},"7b00":function(t,e,n){},"8fde":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("page-title",{attrs:{heading:t.heading,subheading:t.subheading,icon:t.icon,actions:t.actions},on:{action:t.onAction}}),n("div",{staticClass:"row"},[n("b-card",{staticClass:"col-md-4"},[n("ValidationObserver",{ref:"session_form",scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Account Details")]),n("div",{staticClass:"input-group input-group-sm "},[n("div",{staticClass:"input-group-append w-50"},[n("vue-multi-select",{staticClass:"w-100",attrs:{btnLabel:t.input.lane.btnLabel,btnClass:"w-100",options:t.input.lane.options,selectOptions:t.input.lane.values,disabledUnSelect:""},on:{selectionChanged:t.onInputChange},model:{value:t.input.lane.selected,callback:function(e){t.$set(t.input.lane,"selected",e)},expression:"input.lane.selected"}})],1),n("b-form-input",{attrs:{placeholder:"Enter Contact No.",readonly:""},model:{value:t.meta.sender,callback:function(e){t.$set(t.meta,"sender",e)},expression:"meta.sender"}})],1)]}}],null,!0)}),n("br"),n("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phone",vid:"input_contact_number",name:"Contact Number"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v("Contact Details")]),n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.meta.contactMobile,expression:"meta.contactMobile"}],staticClass:"form-control",attrs:{vid:"input_contact_number",type:"tel",name:"phone",placeholder:"Enter Contact No."},domProps:{value:t.meta.contactMobile},on:{change:t.onInputChange,input:function(e){e.target.composing||t.$set(t.meta,"contactMobile",e.target.value)}}}),n("div",{staticClass:"input-group-prepend w-50"},[n("vue-multi-select",{staticClass:"w-100",attrs:{btnLabel:t.input.contact.btnLabel,btnClass:"w-100",options:t.input.contact.options,selectOptions:t.input.contact.values,disabledUnSelect:""},on:{selectionChanged:t.onInputChange},model:{value:t.input.contact.selected,callback:function(e){t.$set(t.input.contact,"selected",e)},expression:"input.contact.selected"}})],1)]),n("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!0)}),n("br"),n("div",{staticClass:"form-row"},[n("div",{staticClass:"input-group input-group-sm"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.meta.contactName,expression:"meta.contactName"}],staticClass:"form-control",attrs:{type:"text",name:"contactName",placeholder:"Optional Name for contact"},domProps:{value:t.meta.contactName},on:{input:function(e){e.target.composing||t.$set(t.meta,"contactName",e.target.value)}}})])]),n("br"),n("b-form-row",[n("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:s},on:{click:t.uploadChat}},[t._v("Save")])])]}}])})],1),n("b-card",{staticClass:"col-md-5 session-list"},[t.table.items&&t.table.items.length?n("b-table",{attrs:{striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,items:t.table.items,fields:t.table.fields,stickyColumn:!0,isRowHeader:!0,"sticky-header":"",responsive:""},scopedSlots:t._u([{key:"cell(assignedToAgent)",fn:function(e){return["BOT"==e.item.mode?n("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"robot"}}):t._e(),"AGENT"==e.item.mode?n("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"user"}}):t._e(),t._v("\n                    "+t._s(e.item.assignedToAgent)+"\n               ")]}},{key:"cell(contactId)",fn:function(e){return[n("i",{staticClass:"fab",class:t.MyDict.socialPrefix(e.item.contactId)}),t._v("\n                   "+t._s(e.item.contactName||e.item.contactId)+"\n               ")]}},{key:"cell(startSessionStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.startSessionStamp))+"\n               ")]}},{key:"cell(fistResponseStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.fistResponseStamp))+" \n               ")]}},{key:"cell(closeSessionStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.closeSessionStamp))+"\n                   "),e.item.active?n("font-awesome-icon",{style:{color:"green"},attrs:{icon:"circle"}}):t._e()]}},{key:"cell(actions)",fn:function(e){return[n("span",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showChat(e.item,e.index,n.target)}}})]}}],null,!1,4030609010)}):t._e()],1)],1),t._m(0),n("input",{ref:"file",attrs:{hidden:"",type:"file"},on:{change:t.onFileChange}}),n("div",{staticClass:"chat_archive",class:{closed:!t.session}},[t.session?n("mod-import-chat-preview",{key:t.session.sessionId,attrs:{session:t.session,sender:t.meta.sender,contact:t.meta.contact},on:{close:t.hideChat}}):t._e()],1)],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"main-card mb-3 card"})])])}],i=(n("6b54"),n("28a5"),n("ac6a"),n("a481"),n("7f7f"),n("96cf"),n("3b8d")),o=n("d166"),c=n("d51b"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card card-shadow chat_box_wrapper"},[n("div",{staticClass:"card-header msg_head chat-head"},[n("div",{staticClass:"d-flex bd-highlight chat-header-left"},[t.activeChat?n("div",{staticClass:"img_cont",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}}),n("span",{staticClass:"online_icon",attrs:{hidden:""}})]):t._e(),t.activeChat?n("div",{staticClass:"user_info",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("span",{staticClass:"user_name"},[t._v(t._s(t.contact))]),n("br"),n("span",{staticClass:"user_text"},[t._v(t._s(t._f("formatDate")(t.activeChat.startSessionStamp))+" - "+t._s(t._f("formatDate")(t.activeChat.closeSessionStamp)))])]):t._e(),n("div",{staticClass:"video_cam"},[t._m(0),t._m(1),n("span",{attrs:{hidden:""},on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[n("i",{staticClass:"fas fa-history"})])])]),n("div",{staticClass:"chat-header-right"},[n("div",{staticClass:"video_cam"},[n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Close",expression:"'Close'"}],staticStyle:{cursor:"pointer"},on:{click:t.closeBox}},[n("i",{staticClass:"fa fa-close"})])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMediaOptions,expression:"!showMediaOptions"}],staticClass:"card-body msg_card_body"},[n("div",{staticClass:"msg_card_body-bubbles"},[n("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots",opacity:.3,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t.activeChat?t.activeChat?t._l(t.activeChat.messages,(function(e){return n("div",[e.sender==t.contact?n("div",{staticClass:"d-flex justify-content-start mb-4 chat-bubble",attrs:{title:e.tags?e.tags.categories:null}},[n("div",{staticClass:"msg_cotainer"},[n("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?n("div",[n("span",{staticClass:"fa fa-photo"}),t._v(" "+t._s(e.template)+" \n                "),n("div",{staticClass:"input-group my-attachments",staticStyle:{"max-width":"200px"}},t._l(e.attachments,(function(e){return n("img",{staticStyle:{"max-width":"200px"},attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):t._e()]),n("span",{staticClass:"msg_time"},[n("span",{staticClass:"msg_user"},[t._v(t._s(e.sender))]),t._v("  "+t._s(t._f("formatDate")(e.timestamp)))])]):e.sender==t.sender?n("div",{staticClass:"d-flex justify-content-end mb-4 chat-bubble",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[n("div",{staticClass:"msg_cotainer_send"},[n("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?n("div",[n("span",{staticClass:"fa fa-photo"}),t._v(" "+t._s(e.template)+" \n                "),n("div",{staticClass:"input-group my-attachments",staticStyle:{"max-width":"200px"}},t._l(e.attachments,(function(e){return n("img",{staticStyle:{"max-width":"200px"},attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):e.template?n("div",{staticClass:"my-msg-template-tag"},[n("span",{staticClass:"fa fa-tag"}),t._v(" "+t._s(e.template)+"\n            ")]):t._e(),e.logs?n("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.logs+"",expression:"m.logs+''"}],staticClass:"log_icon fa fa-exclamation-triangle float-right"}):t._e(),n("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("formatDate")(e.timestamp))+"  "),n("span",{staticClass:"msg_user"},[t._v(t._s(e.sender))])])])]):t._e()])})):t._e():n("div",{staticClass:"msg_card_body-logo"},[n("span",{})])],2)]),n("div",{staticClass:"card-footer"})])},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{hidden:""}},[n("i",{staticClass:"fas fa-video"})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{attrs:{hidden:""}},[n("i",{staticClass:"fas fa-phone"})])}],u=n("ecee"),d=n("ad3d"),m=n("9062"),p=n.n(m),h=(n("9dbb"),n("3e84")),f={components:{"font-awesome-icon":d["a"],Loading:p.a,SlideUpDown:h["a"]},props:{session:Object,sender:String,contact:String},computed:{activeChat:function(t){return this.session}},data:function(){return{message_text:"",quickReplies:null,selectedMedia:null,showMediaOptions:!1,showChatOptions:!1,lastMessageId:null,ilastMessageId:null,MyDict:o["b"],MyFlags:o["c"],MyConst:o["a"],isLoading:!1,showQuickActions:!1}},created:function(){console.log("created")},updated:function(){console.log("updated")},mounted:function(){this.loadMessages(),this.loadQuickLabels()},beforeUnmount:function(){},methods:{loadMessages:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("GetSessionChats...",this.session),this.isLoading=!0,this.isLoading=!1;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeBox:function(t){this.$emit("close")},loadQuickLabels:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadQuickLabels");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},v=f,g=(n("75a9"),n("2877")),b=Object(g["a"])(v,r,l,!1,null,"434cd529",null),_=b.exports,C=n("c074"),w=n("dcc6"),y=n.n(w);n("526a");function x(){return{code:"",dept_email:"",id:null,name:""}}u["c"].add(C["X"],C["W"],C["N"]);var k={components:{PageTitle:c["a"],"font-awesome-icon":d["a"],vueMultiSelect:y.a,ModImportChatPreview:_},data:function(){return{MyFlags:o["c"],MyDict:o["b"],MyConst:o["a"],heading:"Import Chat",subheading:"Import WhatsApp Chats from exported file",icon:"pe-7s-chat icon-gradient bg-tempting-azure",actions:[{label:"Import",icon:"plus",name:"IMPORT_CHAT"}],input:{lane:{btnLabel:function(t){return t.length>0?t.join(","):"Select Account"},options:{multi:!1,labelName:"Filter Types"},values:[],selected:[],sender:""},contact:{btnLabel:function(t){return t.length>0?t.join(","):"Select Contact"},options:{multi:!1,labelName:"Filter Types"},values:[],selected:[],number:""}},table:{fields:[{key:"actions",label:"Action"},{key:"startSessionStamp",label:"Start@"},{key:"closeSessionStamp",label:"Closed@"}],items:[],perPage:25,currentPage:1,rows:0},meta:{sender:null,contact:null,contactMobile:null,contactName:null,lane:null},newItem:x(),modelName:"MODAL_ADD_TEAM",session:null}},computed:{teams:function(t){return this.$store.getters.StateTeams}},created:function(t){this.loadAgentTeams()},methods:{loadAgentTeams:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),createTeam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("CreatTeam",this.newItem);case 2:this.newItem=x(),this.$refs.form.reset(),this.onAction({name:"CANCEL"});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),enableTeam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isactive="Y"==e.isactive?"N":"Y",t.next=3,this.$store.dispatch("CreatTeam",e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setItemDefault:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("SetTeamsDefault",e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelReps:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.newItem=x(),this.onAction({name:"CANCEL"});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onAction:function(t){switch(t.name){case"IMPORT_CHAT":this.$refs.file.click();break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",t);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",t)}},uploadChat:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("UploadParsedChat",{meta:{contact:this.meta.contact,contactMobile:this.meta.contactMobile.replace(/\D/g,""),contactName:this.meta.contactName,sender:this.meta.sender,lane:this.meta.lane,contactType:"WHATSAPP"},results:this.table.items});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onInputChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.meta.lane=this.input.lane.selected[0],this.meta.contact=this.input.contact.selected[0],this.meta.sender=this.meta.contact==this.input.contact.values[0]?this.input.contact.values[1]:this.input.contact.values[0];case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onFileChange:function(t){var e=this.$refs.file.files[0];this.file=e,console.log("onFileChange",e),this.uploadFile(e),this.$refs.session_form&&this.$refs.session_form.validate()},uploadFile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("ParseChatFile",{file:e,contactType:"WHATSAPP",clientDate:(new Date).toString().split("(")[0].trim(),clientDateFormat:"eee MMM dd yyyy HH:mm:ss 'GMT'Z"});case 3:n=t.sent,this.message="Uploaded!!",this.table.items=n.results,this.input.contact.values=[n.meta.senderA,n.meta.senderB],this.input.contact.selected=[n.meta.senderA],this.input.lane.values=n.meta.lanes,this.input.lane.selected=[n.meta.lanes[0]],this.onInputChange(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.message="Something went wrong!!";case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}(),removeImage:function(t){this.file=""},hideChat:function(t){this.session=null},showChat:function(t){this.session&&this.session==t?this.session=null:this.session=t,console.log("this.session ...",this.session)}}},S=k,M=(n("f255"),n("fc7e"),Object(g["a"])(S,s,a,!1,null,"1a28a666",null));e["default"]=M.exports},d51b:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-page-title"},[n("div",{staticClass:"page-title-wrapper"},[n("div",{staticClass:"page-title-heading"},[n("div",{staticClass:"page-title-icon"},[n("i",{class:t.icon})]),n("div",[t._v("\n                "+t._s(t.heading)+"\n                "),n("div",{staticClass:"page-title-subheading"},[t._v("\n                    "+t._s(t.subheading)+"\n                ")])])]),n("div",{staticClass:"page-title-actions"},t._l(t.actions,(function(e){return n("span",[e.link?n("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn btn-success",attrs:{tag:"button",to:e.link,type:"button"}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.icon}}),t._v("\n                    "+t._s(e.label)+" \n                ")],1):n("button",{staticClass:"btn-shadow d-inline-flex align-items-center btn btn-success",on:{click:function(n){return t.clickAction(e)}}},[n("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.icon}}),t._v("\n                    "+t._s(e.label)+" \n                ")],1)],1)})),0)])])},a=[],i=n("ecee"),o=n("c074"),c=n("ad3d");i["c"].add(o["N"],o["H"]);var r={components:{"font-awesome-icon":c["a"]},props:{icon:String,heading:String,subheading:String,actions:Array},methods:{clickAction:function(t){this.$emit("action",t)}}},l=r,u=n("2877"),d=Object(u["a"])(l,s,a,!1,null,null,null);e["a"]=d.exports},f255:function(t,e,n){"use strict";n("6e40")},fc7e:function(t,e,n){"use strict";n("4bc8")}}]);