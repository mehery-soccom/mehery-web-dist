(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e96129b0"],{"0f9f":function(t,e,s){},"28a5":function(t,e,s){"use strict";var n=s("aae3"),a=s("cb7c"),i=s("ebd6"),o=s("0390"),c=s("9def"),r=s("5f1b"),l=s("520a"),u=s("79e5"),d=Math.min,m=[].push,p="split",h="length",f="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));s("214f")("split",2,(function(t,e,s,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[h]||2!="ab"[p](/(?:ab)*/)[h]||4!="."[p](/(.?)(.?)/)[h]||"."[p](/()()/)[h]>1||""[p](/.?/)[h]?function(t,e){var a=String(this);if(void 0===t&&0===e)return[];if(!n(t))return s.call(a,t,e);var i,o,c,r=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?v:e>>>0,g=new RegExp(t.source,u+"g");while(i=l.call(g,a)){if(o=g[f],o>d&&(r.push(a.slice(d,i.index)),i[h]>1&&i.index<a[h]&&m.apply(r,i.slice(1)),c=i[0][h],d=o,r[h]>=p))break;g[f]===i.index&&g[f]++}return d===a[h]?!c&&g.test("")||r.push(""):r.push(a.slice(d)),r[h]>p?r.slice(0,p):r}:"0"[p](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:s.call(this,t,e)}:s,[function(s,n){var a=t(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,a,n):b.call(String(a),s,n)},function(t,e){var n=u(b,t,this,e,b!==s);if(n.done)return n.value;var l=a(t),m=String(this),p=i(l,RegExp),h=l.unicode,f=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),_=new p(g?l:"^(?:"+l.source+")",f),C=void 0===e?v:e>>>0;if(0===C)return[];if(0===m.length)return null===r(_,m)?[m]:[];var w=0,y=0,x=[];while(y<m.length){_.lastIndex=g?y:0;var k,S=r(_,g?m:m.slice(y));if(null===S||(k=d(c(_.lastIndex+(g?0:y)),m.length))===w)y=o(m,y,h);else{if(x.push(m.slice(w,y)),x.length===C)return x;for(var M=1;M<=S.length-1;M++)if(x.push(S[M]),x.length===C)return x;y=w=k}}return x.push(m.slice(w)),x}]}))},"4bc8":function(t,e,s){},"578f":function(t,e,s){"use strict";s("0f9f")},"75a9":function(t,e,s){"use strict";s("7b00")},"7b00":function(t,e,s){},"8fde":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("page-title",{attrs:{heading:t.heading,subheading:t.subheading,icon:t.icon,actions:t.actions},on:{action:t.onAction}}),s("div",{staticClass:"row"},[s("b-card",{staticClass:"col-md-4"},[s("ValidationObserver",{ref:"session_form",scopedSlots:t._u([{key:"default",fn:function(e){var n=e.invalid;return[s("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("label",[t._v("Account Details")]),s("div",{staticClass:"input-group input-group-sm "},[s("div",{staticClass:"input-group-append w-50"},[s("vue-multi-select",{staticClass:"w-100",attrs:{btnLabel:t.input.lane.btnLabel,btnClass:"w-100",options:t.input.lane.options,selectOptions:t.input.lane.values,disabledUnSelect:""},on:{selectionChanged:t.onInputChange},model:{value:t.input.lane.selected,callback:function(e){t.$set(t.input.lane,"selected",e)},expression:"input.lane.selected"}})],1),s("b-form-input",{attrs:{placeholder:"Enter Contact No.",readonly:""},model:{value:t.meta.sender,callback:function(e){t.$set(t.meta,"sender",e)},expression:"meta.sender"}})],1)]}}],null,!0)}),s("br"),s("ValidationProvider",{staticClass:"form-row",attrs:{rules:"required|phone",vid:"input_contact_number",name:"Contact Number"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("label",[t._v("Contact Details")]),s("div",{staticClass:"input-group input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.meta.contactNumber,expression:"meta.contactNumber"}],staticClass:"form-control",attrs:{vid:"input_contact_number",type:"tel",name:"phone",placeholder:"Enter Contact No."},domProps:{value:t.meta.contactNumber},on:{change:t.onInputChange,input:function(e){e.target.composing||t.$set(t.meta,"contactNumber",e.target.value)}}}),s("div",{staticClass:"input-group-prepend w-50"},[s("vue-multi-select",{staticClass:"w-100",attrs:{btnLabel:t.input.contact.btnLabel,btnClass:"w-100",options:t.input.contact.options,selectOptions:t.input.contact.values,disabledUnSelect:""},on:{selectionChanged:t.onInputChange},model:{value:t.input.contact.selected,callback:function(e){t.$set(t.input.contact,"selected",e)},expression:"input.contact.selected"}})],1)]),s("span",{staticClass:"v-input-error"},[t._v(t._s(e.errors[0]))])]}}],null,!0)}),s("br"),s("div",{staticClass:"form-row"},[s("div",{staticClass:"input-group input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.meta.contactName,expression:"meta.contactName"}],staticClass:"form-control",attrs:{type:"text",name:"contactName",placeholder:"Optional Name for contact"},domProps:{value:t.meta.contactName},on:{input:function(e){e.target.composing||t.$set(t.meta,"contactName",e.target.value)}}})])]),s("br"),s("b-form-row",[s("button",{staticClass:"form-control btn btn-primary",attrs:{name:"password",id:"examplePassword",disabled:n},on:{click:t.uploadChat}},[t._v("Save")])])]}}])})],1),s("b-card",{staticClass:"col-md-5 session-list"},[s("b-table",{attrs:{striped:!0,bordered:!0,outlined:!1,small:!0,hover:!0,dark:!1,fixed:!1,"foot-clone":!1,items:t.table.items,fields:t.table.fields,stickyColumn:!0,isRowHeader:!0,"sticky-header":"",responsive:""},scopedSlots:t._u([{key:"cell(assignedToAgent)",fn:function(e){return["BOT"==e.item.mode?s("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"robot"}}):t._e(),"AGENT"==e.item.mode?s("font-awesome-icon",{style:{color:"grey"},attrs:{icon:"user"}}):t._e(),t._v("\n                    "+t._s(e.item.assignedToAgent)+"\n               ")]}},{key:"cell(contactId)",fn:function(e){return[s("i",{staticClass:"fab",class:t.MyDict.socialPrefix(e.item.contactId)}),t._v("\n                   "+t._s(e.item.contactName||e.item.contactId)+"\n               ")]}},{key:"cell(startSessionStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.startSessionStamp))+"\n               ")]}},{key:"cell(fistResponseStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.fistResponseStamp))+" \n               ")]}},{key:"cell(closeSessionStamp)",fn:function(e){return[t._v("\n                   "+t._s(t._f("formatDate")(e.item.closeSessionStamp))+"\n                   "),e.item.active?s("font-awesome-icon",{style:{color:"green"},attrs:{icon:"circle"}}):t._e()]}},{key:"cell(actions)",fn:function(e){return[s("span",{staticClass:"far fa-comment-alt",staticStyle:{cursor:"pointer"},on:{click:function(s){return t.showChat(e.item,e.index,s.target)}}})]}}])})],1)],1),t._m(0),s("input",{ref:"file",attrs:{hidden:"",type:"file"},on:{change:t.onFileChange}}),s("div",{staticClass:"chat_archive",class:{closed:!t.session}},[t.session?s("mod-import-chat-preview",{key:t.session.sessionId,attrs:{session:t.session,sender:t.meta.sender,contact:t.meta.contact},on:{close:t.hideChat}}):t._e()],1)],1)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"main-card mb-3 card"})])])}],i=(s("6b54"),s("28a5"),s("ac6a"),s("7f7f"),s("96cf"),s("3b8d")),o=s("bd86"),c=s("d166"),r=s("d51b"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card card-shadow chat_box_wrapper"},[s("div",{staticClass:"card-header msg_head chat-head"},[s("div",{staticClass:"d-flex bd-highlight chat-header-left"},[t.activeChat?s("div",{staticClass:"img_cont",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("img",{staticClass:"rounded-circle user_img",attrs:{src:t.activeChat.profilePic||t.MyDict.profilePic}}),s("span",{staticClass:"online_icon",attrs:{hidden:""}})]):t._e(),t.activeChat?s("div",{staticClass:"user_info",on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("span",{staticClass:"user_name"},[t._v(t._s(t.contact))]),s("br"),s("span",{staticClass:"user_text"},[t._v(t._s(t._f("formatDate")(t.activeChat.startSessionStamp))+" - "+t._s(t._f("formatDate")(t.activeChat.closeSessionStamp)))])]):t._e(),s("div",{staticClass:"video_cam"},[t._m(0),t._m(1),s("span",{attrs:{hidden:""},on:{click:function(e){t.MyFlags.showContactProfile=!t.MyFlags.showContactProfile}}},[s("i",{staticClass:"fas fa-history"})])])]),s("div",{staticClass:"chat-header-right"},[s("div",{staticClass:"video_cam"},[s("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Close",expression:"'Close'"}],staticStyle:{cursor:"pointer"},on:{click:t.closeBox}},[s("i",{staticClass:"fa fa-close"})])])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMediaOptions,expression:"!showMediaOptions"}],staticClass:"card-body msg_card_body"},[s("div",{staticClass:"msg_card_body-bubbles"},[s("loading",{attrs:{active:t.isLoading,"can-cancel":!1,loader:"dots",opacity:.3,"is-full-page":!1},on:{"update:active":function(e){t.isLoading=e}}}),t.activeChat?t.activeChat?t._l(t.activeChat.messages,(function(e){return s("div",[e.sender==t.contact?s("div",{staticClass:"d-flex justify-content-start mb-4 chat-bubble",attrs:{title:e.tags?e.tags.categories:null}},[s("div",{staticClass:"msg_cotainer"},[s("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?s("div",[s("span",{staticClass:"fa fa-photo"}),t._v(" "+t._s(e.template)+" \n                "),s("div",{staticClass:"input-group my-attachments",staticStyle:{"max-width":"200px"}},t._l(e.attachments,(function(e){return s("img",{staticStyle:{"max-width":"200px"},attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):t._e()]),s("span",{staticClass:"msg_time"},[s("span",{staticClass:"msg_user"},[t._v(t._s(e.sender))]),t._v("  "+t._s(t._f("formatDate")(e.timestamp)))])]):e.sender==t.sender?s("div",{staticClass:"d-flex justify-content-end mb-4 chat-bubble",attrs:{"data-local-id":"m.localId","data-message-id":e.messageId}},[s("div",{staticClass:"msg_cotainer_send"},[s("span",[t._v(t._s(t._f("newlines")(t._f("striphtml")(e.text))))]),e.attachments?s("div",[s("span",{staticClass:"fa fa-photo"}),t._v(" "+t._s(e.template)+" \n                "),s("div",{staticClass:"input-group my-attachments",staticStyle:{"max-width":"200px"}},t._l(e.attachments,(function(e){return s("img",{staticStyle:{"max-width":"200px"},attrs:{src:t._f("thumburl")(e.mediaURL)}})})),0)]):e.template?s("div",{staticClass:"my-msg-template-tag"},[s("span",{staticClass:"fa fa-tag"}),t._v(" "+t._s(e.template)+"\n            ")]):t._e(),e.logs?s("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.logs+"",expression:"m.logs+''"}],staticClass:"log_icon fa fa-exclamation-triangle float-right"}):t._e(),s("span",{staticClass:"msg_time_send"},[t._v(t._s(t._f("formatDate")(e.timestamp))+"  "),s("span",{staticClass:"msg_user"},[t._v(t._s(e.sender))])])])]):t._e()])})):t._e():s("div",{staticClass:"msg_card_body-logo"},[s("span",{})])],2)]),s("div",{staticClass:"card-footer"})])},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{attrs:{hidden:""}},[s("i",{staticClass:"fas fa-video"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{attrs:{hidden:""}},[s("i",{staticClass:"fas fa-phone"})])}],d=s("ecee"),m=s("ad3d"),p=s("9062"),h=s.n(p),f=(s("9dbb"),s("3e84")),v={components:{"font-awesome-icon":m["a"],Loading:h.a,SlideUpDown:f["a"]},props:{session:Object,sender:String,contact:String},computed:{activeChat:function(t){return this.session}},data:function(){return{message_text:"",quickReplies:null,selectedMedia:null,showMediaOptions:!1,showChatOptions:!1,lastMessageId:null,ilastMessageId:null,MyDict:c["b"],MyFlags:c["c"],MyConst:c["a"],isLoading:!1,showQuickActions:!1}},created:function(){console.log("created")},updated:function(){console.log("updated")},mounted:function(){this.loadMessages(),this.loadQuickLabels()},beforeUnmount:function(){},methods:{loadMessages:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("GetSessionChats...",this.session),this.isLoading=!0,this.isLoading=!1;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeBox:function(t){this.$emit("close")},loadQuickLabels:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("LoadQuickLabels");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},g=v,b=(s("75a9"),s("2877")),_=Object(b["a"])(g,l,u,!1,null,"434cd529",null),C=_.exports,w=s("c074"),y=s("dcc6"),x=s.n(y);s("526a");function k(){return{code:"",dept_email:"",id:null,name:""}}d["c"].add(w["X"],w["W"],w["N"]);var S={components:{PageTitle:r["a"],"font-awesome-icon":m["a"],vueMultiSelect:x.a,ModImportChatPreview:C},data:function(){return{MyFlags:c["c"],MyDict:c["b"],MyConst:c["a"],heading:"Import Chat",subheading:"Import WhatsApp Chats from exported file",icon:"pe-7s-chat icon-gradient bg-tempting-azure",actions:[{label:"Import",icon:"plus",name:"IMPORT_CHAT"}],input:{lane:{btnLabel:function(t){return t.length>0?t.join(","):"Select Account"},options:{multi:!1,labelName:"Filter Types"},values:[],selected:[],sender:""},contact:{btnLabel:function(t){return t.length>0?t.join(","):"Select Contact"},options:{multi:!1,labelName:"Filter Types"},values:[],selected:[],number:""}},table:{fields:[{key:"actions",label:"Action"},{key:"startSessionStamp",label:"Start@"},{key:"closeSessionStamp",label:"Closed@"}],items:[],perPage:25,currentPage:1,rows:0},meta:Object(o["a"])({sender:null,contact:null,contactMobile:null},"contactMobile",null),newItem:k(),modelName:"MODAL_ADD_TEAM",session:null}},computed:{teams:function(t){return this.$store.getters.StateTeams}},created:function(t){this.loadAgentTeams()},methods:{loadAgentTeams:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),createTeam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("CreatTeam",this.newItem);case 2:this.newItem=k(),this.$refs.form.reset(),this.onAction({name:"CANCEL"});case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),enableTeam:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isactive="Y"==e.isactive?"N":"Y",t.next=3,this.$store.dispatch("CreatTeam",e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),setItemDefault:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("SetTeamsDefault",e);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),cancelReps:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.newItem=k(),this.onAction({name:"CANCEL"});case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onAction:function(t){switch(t.name){case"IMPORT_CHAT":this.$refs.file.click();break;case"EDIT_ITEM":this.oldHash=JSON.stringify(this.newItem),this.$bvModal.show(this.modelName),console.log("ADD_ITEM",t);break;case"CANCEL":this.$bvModal.hide(this.modelName);break;default:console.log("NoMapping",t)}},uploadChat:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$store.dispatch("UploadParsedChat",{meta:{contact:this.meta.contact,contactMobile:this.meta.contactMobile,contactName:null,sender:this.meta.sender,lane:this.meta.lane},results:this.table.items});case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onInputChange:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.meta.contact=this.input.contact.selected[0],this.meta.sender=this.meta.contact==this.input.contact.values[0]?this.input.contact.values[1]:this.input.contact.values[0],console.log(this.meta.contact,this.meta.sender);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),onFileChange:function(t){var e=this.$refs.file.files[0];this.file=e,console.log("onFileChange",e),this.uploadFile(e),this.$refs.session_form&&this.$refs.session_form.validate()},uploadFile:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$store.dispatch("ParseChatFile",{file:e,contactType:"WHATSAPP",clientDate:(new Date).toString().split("(")[0].trim(),clientDateFormat:"eee MMM dd yyyy HH:mm:ss 'GMT'Z"});case 3:s=t.sent,this.message="Uploaded!!",this.table.items=s.results,this.input.contact.values=[s.meta.senderA,s.meta.senderB],this.input.contact.selected=[s.meta.senderA],this.input.lane.values=s.meta.lanes,this.input.lane.selected=[s.meta.lanes[0]],this.onInputChange(),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.message="Something went wrong!!";case 17:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}(),removeImage:function(t){this.file=""},hideChat:function(t){this.session=null},showChat:function(t){this.session&&this.session==t?this.session=null:this.session=t,console.log("this.session ...",this.session)}}},M=S,N=(s("578f"),s("fc7e"),Object(b["a"])(M,n,a,!1,null,"6d7db142",null));e["default"]=N.exports},d51b:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app-page-title"},[s("div",{staticClass:"page-title-wrapper"},[s("div",{staticClass:"page-title-heading"},[s("div",{staticClass:"page-title-icon"},[s("i",{class:t.icon})]),s("div",[t._v("\n                "+t._s(t.heading)+"\n                "),s("div",{staticClass:"page-title-subheading"},[t._v("\n                    "+t._s(t.subheading)+"\n                ")])])]),s("div",{staticClass:"page-title-actions"},t._l(t.actions,(function(e){return s("span",[e.link?s("router-link",{staticClass:"btn-shadow d-inline-flex align-items-center btn btn-success",attrs:{tag:"button",to:e.link,type:"button"}},[s("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.icon}}),t._v("\n                    "+t._s(e.label)+" \n                ")],1):s("button",{staticClass:"btn-shadow d-inline-flex align-items-center btn btn-success",on:{click:function(s){return t.clickAction(e)}}},[s("font-awesome-icon",{staticClass:"mr-2",attrs:{icon:e.icon}}),t._v("\n                    "+t._s(e.label)+" \n                ")],1)],1)})),0)])])},a=[],i=s("ecee"),o=s("c074"),c=s("ad3d");i["c"].add(o["N"],o["H"]);var r={components:{"font-awesome-icon":c["a"]},props:{icon:String,heading:String,subheading:String,actions:Array},methods:{clickAction:function(t){this.$emit("action",t)}}},l=r,u=s("2877"),d=Object(u["a"])(l,n,a,!1,null,null,null);e["a"]=d.exports},fc7e:function(t,e,s){"use strict";s("4bc8")}}]);